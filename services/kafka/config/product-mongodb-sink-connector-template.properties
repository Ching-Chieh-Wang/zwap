name=product-mongodb-sink-connector
topics=product-mongodb-write
connector.class=com.mongodb.kafka.connect.MongoSinkConnector
tasks.max=1

# Specific global MongoDB Sink Connector configuration
connection.uri=${PRODUCT_MONGODB_SERVICE_URI}
database=product
collection=products

# --- CORRECTED ID Strategy and Projection (based on your latest docs) ---
# Use 'doc.id.strategy' as per your documentation
doc.id.strategy=com.mongodb.kafka.connect.sink.processor.id.strategy.PartialValueStrategy
# Use 'value.projection.type' and 'value.projection.list' for PartialValueStrategy
# as per your documentation for the managed connector
value.projection.type=ALLOWLIST
value.projection.list=_id

# --- Write Model Strategy for Upserts (based on your latest docs) ---
# 'write.strategy' as per your documentation
write.strategy=com.mongodb.kafka.connect.sink.writemodel.strategy.UpdateOneDefaultStrategy

# --- Enable Deletes (based on your latest docs) ---
# 'delete.on.null.values' as per your documentation
delete.on.null.values=true

max.batch.size=500
# Removed: poll.interval.ms=1000 - Not present in your provided documentation.

# --- Error Handling (properties match your docs) ---
errors.tolerance=all # Maps to mongo.errors.tolerance='all' as per docs' Acceptable Values
errors.log.enable=true # Maps to mongo.errors.log.enable='true'
errors.log.include.messages=true